<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="format-detection" content="telephone=no">
		<title>V网夹</title>
		<link rel="stylesheet" href="__HOME_CSS__/style_v.css">
		<script src="__HOME_JS__/rem.js"></script>
		<script src="__HOME_JS__/modernizr.js"></script>
		<style>
			* {
				padding: 0;
				margin: 0;
			}
			
			body {
				background: #fff;
			}
			
			#search_form {
				width: 100%;
				height: 100%;
			}
			
			.input {
				width: 90%;
				height: 3rem;
				background-color: #fff;
				padding: 0 5%;
				position: fixed;
				top: 0;
				left: 0;
				z-index: 100;
			}
			
			.ipt-a {
				display: inline-block;
				width: 100%;
				height: 3rem;
			}
			
			.manage {
				width: 100%;
				height: 100%;
				color: #666;
				font-size: 0.75rem;
				line-height: 3rem;
				text-align: center;
			}
			
			.cancel {
				width: 100%;
				height: 100%;
				color: #666;
				font-size: 0.75rem;
				display: none;
				line-height: 3rem;
				text-align: center;
			}
			
			.ipt {
				height: 1.5rem;
				width: 100%;
				border: 0;
				font-size: 0.75rem;
				text-indent: 1.45rem;
				border-radius: 1rem;
				color: #666;
				background: rgba(179, 179, 179, 0.25);
				-webkit-appearance: none;
				outline: none;
				margin: 0.75rem 0;
			}
			
			.ipt::-webkit-input-placeholder {
				color: #666;
				font-size: 0.75rem;
			}
			
			.tab {
				width: 100%;
				height: 2.5rem;
				position: fixed;
				top: 3rem;
				left: 0;
				z-index: 100;
			}
			
			.tab>ul>li {
				float: left;
				width: 100%;
				height: 2.5rem;
				line-height: 2.5rem;
				background-color: #fff;
				box-shadow: 0 0.1rem 0.25rem rgba(0, 0, 0, 0.08);
				/*底边阴影*/
				margin-bottom: 0.5rem;
			}
			
			.tab-a {
				display: block;
				color: #666;
				text-align: center;
				float: left;
				width: 33.33%;
				height: 2.5rem;
				line-height: 2.5rem;
				font-size: 0.75rem;
				font-weight: 600;
			}
			
			.screen {
				width: 75%;
				height: 100%;
				background-color: #fff;
				position: fixed;
				top: 0;
				right: -20rem;
				z-index: 502;
				overflow: hidden;
			}
			
			.sort_list>a {
				display: block;
				width: 100%;
				height: 100%;
			}
			
			.sx {
				width: 100%;
				height: 2.5rem;
				color: #2FB3D3;
				font-size: 1rem;
				line-height: 2.5rem;
				padding-left: 0.75rem;
			}
			
			.vwan {
				width: 100%;
				height: 2rem;
				background: #F3F3F3;
				padding-left: 0.75rem;
			}
			
			.vwan>ul>li {
				float: left;
				height: 100%;
				line-height: 2rem;
			}
			
			.vf {
				color: #666;
				font-size: 0.4rem;
				font-weight: 600;
				width: 60%;
			}
			
			.add {
				color: #666;
				font-size: 0.35rem;
				width: 40%;
			}
			
			.add.a {
				display: block;
				width: 100%;
				height: 100%;
			}
			
			.all {
				width: 100%;
				height: 2.5rem;
				color: #666;
				font-size: 0.35rem;
				padding-left: 0.75rem;
			}
			
			.all>span {
				display: inline-block;
				width: 20%;
				height: 1.5rem;
				background-color: #007aff;
				border-radius: 1rem;
				text-align: center;
				line-height: 1.5rem;
				margin-top: 0.5rem;
			}
			
			.ly {
				width: 100%;
				height: 2rem;
				line-height: 2rem;
				padding-left: 0.75rem;
				color: #666;
				font-size: 0.75rem;
				font-weight: 600;
				background: #F3F3F3;
			}
			
			.tabs {
				width: 100%;
				height: 3.5rem;
				padding-left: 0.75rem;
			}
			
			.tabs>ul>li {
				height: 1.5rem;
				float: left;
				font-size: 0.5rem;
				display: inline-block;
				border-radius: 1rem;
				text-align: center;
				line-height: 1.5rem;
				margin-top: 1rem;
				color: #666;
			}
			
			.do {
				position: absolute;
				bottom: 0;
				left: 0;
				text-align: center;
				width: 100%;
				height: 2.5rem;
				line-height: 2.5rem;
				color: #fff;
				background: #2FB3D3;
				font-size: 1rem;
				letter-spacing: 0.125rem;
			}
			
			.qb {
				width: 20%;
				background: rgba(0, 0, 0, 0.2);
			}
			
			.xs,
			.pz {
				width: 30%;
				background: #cecece;
			}
			
			.xs {
				margin: 0 0.5rem;
			}
			
			.active {
				background-color: #FF9D49;
				color: #fff !important;
			}
			
			.cover {
				background: rgba(0, 0, 0, 0.39);
				width: 100%;
				height: 100%;
				position: fixed;
				top: 0;
				left: 0;
				display: none;
				z-index: 100;
			}
			
			.che {
				position: absolute;
				bottom: 0.8rem;
				right: 2rem;
				display: none;
			}
			
			.del {
				position: fixed;
				bottom: 0;
				left: 0;
				text-align: center;
				width: 100%;
				height: 2.5rem;
				line-height: 2.5rem;
				color: #fff;
				background: #eb4e3d;
				font-size: 1rem;
				letter-spacing: 0.125rem;
				display: none;
				z-index: 500;
			}
			
			.num {
				width: 100%;
				height: 2rem;
				color: #999;
				font-size: 0.75rem;
				overflow: hidden;
				text-overflow: ellipsis;
				white-space: nowrap;
			}
			
			.tan {
				position: fixed;
				z-index: 1000;
				top: 50%;
				left: 50%;
				display: block;
				overflow: hidden;
				width: 55%;
				height: 5rem;
				-webkit-transition-property: -webkit-transform, opacity;
				transition-property: transform, opacity;
				-webkit-transform: translate3d(-50%, -50%, 0) scale(1.185);
				transform: translate3d(-50%, -50%, 0) scale(1.185);
				opacity: 1;
				color: #000;
				border-radius: 13px;
				background-color: #fff;
				display: none;
			}
			
			.big {
				width: 100%;
				height: 100%;
				position: fixed;
				top: 0;
				left: 0;
				background: rgba(0, 0, 0, 0.7);
				z-index: 999;
				display: none;
			}
			
			.hint {
				width: 100%;
				height: 2.8rem;
				text-align: center;
				border-bottom: 1px solid #aaa;
				/*padding: 0.5rem 0;*/
				margin-top: 0.5rem;
			}
			
			.aff {
				width: 100%;
				height: 1.5rem;
				line-height: 1.8rem;
				font-size: 0;
			}
			
			.sys {
				font-size: 0.8rem;
				font-weight: 500;
			}
			
			.sure {
				font-size: 0.5rem;
				margin-top: 0.125rem;
			}
			
			.move {
				font-size: 0.425rem;
				color: #007AFF;
				width: 49%;
				height: 1rem;
				line-height: 1rem;
				text-align: center;
				display: inline-block;
				border-right: 0.025rem solid #aaa;
				margin-top: -0.125rem;
			}
			
			.affirm {
				font-size: 0.425rem;
				color: #007AFF;
				width: 49%;
				height: 1rem;
				line-height: 1rem;
				text-align: center;
				display: inline-block;
				font-weight: 600;
				margin-top: -0.125rem;
			}
			
			.adds {
				float: left;
				width: 26.5%;
				height: 1.5rem;
				line-height: 1.5rem;
				text-align: center;
				margin-right: 5%;
				margin-top: 5%;
				border-radius: 0.75rem;
				background: rgba(0, 0, 0, 0.2);
				overflow: hidden;
				text-overflow: ellipsis;
				white-space: nowrap;
				font-size: 0.5rem;
			}
			
			.ave {
				background-color: #FF9D49;
				color: #fff;
			}
			
			.input>div {
				float: left;
				height: 3rem;
			}
			
			.i-div {
				width: 80%;
			}
			
			.in-div {
				width: 20%;
			}
			
			.in-div>ul {
				width: 100%;
				height: 100%;
			}
			
			.sort_box {
				background-color: #f0f0f0;
				margin-top: 5.5rem;
			}
			
			.sort_letter {
				margin-top: 10px;
				background-color: #fff;
				height: 30px;
				line-height: 30px;
				font-size: 16px;
			}
			
			.sort_letter:first-child {
				margin-top: 0px;
			}
			
			.sort_list {
				background-color: #fff;
			}
			
			.model {
				width: 5rem;
				height: 2.5rem;
				background: rgba(0, 0, 0, 0.5);
				color: #fff;
				line-height: 2.5rem;
				font-size: 0.75rem;
				border-radius: 0.25rem;
				text-align: center;
				position: absolute;
				bottom: 5rem;
				left: 50%;
				margin-left: -2.5rem;
				display: none;
			}
			
			.initials {
				position: fixed;
				top: 5.5rem;
				right: 0px;
				width: 2rem;
				padding-right: 0rem;
				text-align: center;
				font-size: 0.75rem;
				z-index: 300;
				background: rgba(242, 242, 242, 0.58);
				overflow: auto;
				color: #666;
			}
			
			.initials>ul {
				width: 100%;
				height: 80%;
				overflow: auto;
			}
			
			.initials>ul>li {
				width: 100%;
				height: 35px !important;
				line-height: 35px;
			}
			
			.sort_list .num_logo {
				width: 2.5rem;
				height: 2.5rem;
				border-radius: 0;
				position: absolute;
				top: 1rem;
				left: 1rem;
			}
			
			.sort_list {
				padding: 0.55rem 6rem 0.55rem 4rem;
				height: 4rem;
				line-height: 1.5rem;
				position: relative;
			}
			
			.lnk {
				width: 3.2rem;
				height: 1.3rem;
				line-height: 1.3rem;
				text-align: center;
				border-radius: 0.75rem;
				color: #fff;
				font-size: 0.6rem;
				position: absolute;
				top: 1.2rem;
				right: 2.5rem;
			}
			
			.lnk>a {
				display: block;
				width: 100%;
				height: 100%;
				color: #fff;
				font-size: 0.6rem;
				line-height: 1.3rem;
				background: #2FB3D3;
				border-radius: 0.75rem;
			}
			.num_cen{
				width: 100%;
				height: 100%;
				position: relative;
			}
			.numbs{
				width: 1.25rem;
				height: 0.6rem;
				background:#F23636;
				border-radius:0.15rem 0.15rem 0.15rem 0px;
				position: absolute;
				top:0;
				right:0;
				color:#fff;
				font-size: 0.55rem;
				font-weight: 550;
				line-height: 0.6rem;
				text-align: center;
				display: none;
			}
			.num_cen img{
				border-radius: 50%;
			}
		</style>
	</head>

	<body>
		<div class="input">
			<div class="i-div">
				<a class="ipt-a" href="javascript:;">
					<form id="search_form" action="{:url('Home/Cardwallet/index')}" method="post">
						<input class="ipt" type="text" name="keyword" placeholder="按姓名或手机号搜索" value="{$keyword}" />
					</form>
				</a>
			</div>
			<div class="in-div">
				<ul>
					<li class="manage">管理</li>
					<li class="cancel">取消</li>
				</ul>
			</div>
		</div>

		<div class="tab">
			<ul>
				<li>
					<a class="tab-a" href="{:url('Home/Cardwallet/photoCard')}">拍照收纳</a>
					<a class="tab-a bor" href="{:url('Home/Cardwallet/exchange')}">交换V网</a>
					<a class="tab-a sel" href="javascript:;">筛选</a>
				</li>
			</ul>
		</div>
		<div id="letter"></div>
		<div class="sort_box">
			<foreach name="result" item="vo">
				<foreach name="vo" item="v">
					<div class="sort_list">
						<if condition="$v.object_id eq 0">
							<a href="{:url('Home/Cardwallet/info?id='.$v['id'])}">
								<else/>
								<a href="{:url('Home/Nologin/card_jump/id/'.$v['object_id'])}">
						</if>
						<div class="num_logo">
							<div class="num_cen">
								<if condition="$v.user_info eq null">
									<img class="" src="__HOME_IMAGES__/mingpian1.png">
									<else/>
									<img class="" src="{$v.user_info.headimg}">
								</if>
								<div class="numbs" id="{$v.phone}"></div>
							</div>
						</div>
						<div>
							<p class="num_name">{$v.realname}</p>
							<p class="num">{$v.phone}</p>
						</div>
						<div class="che">
							<input type="checkbox" name="cardS[]" id="checkbox-3-1.{$v['id']}" value="{$v.id}" /><label for="checkbox-3-1.{$v['id']}"></label>
						</div>

						</a>
						<if condition="$v.object_id neq 0 and $leader_id eq 1">
							<div class="lnk">
								<a href="http://mingxin365.com:2001/webdemo/h5/login.html?uname={$phone}&friend={$v.phone}">聊天</a>
							</div>
						</if>
					</div>
				</foreach>
			</foreach>

		</div>
		<div style="width:100%;height:3rem;"></div>
		<div class="initials">
			<ul>
				<!--<li><img src="img/068.png"></li>-->
			</ul>
		</div>
		<div class="del">删除</div>
		<div class="tan">
			<div class="hint">
				<p class="sys">提示</p>
				<p class="sure">是否要确认删除？</p>
			</div>
			<div class="aff">
				<span class="move">取消</span>
				<span class="affirm">确认</span>
			</div>
		</div>
		<div class="big"></div>
		<div class="screen">
			<div class="sx">筛选</div>

			<div class="ly">v网来源</div>
			<div class="tabs">
				<ul>
					<li class="qb active" value="0">全部</li>
					<li class="xs" value="1">线上收藏</li>
					<li class="pz" value="2">拍照收纳 </li>
				</ul>
			</div>
			<div class="vwan">
				<ul>
					<li class="vf">v网分组</li>
					<li class="add">
						<a href="{:url('Home/Cardwallet/walletCategory')}" style="color: #666">+添加分类</a>
					</li>
				</ul>
			</div>
			<div class="all">
				<ul>
					<li class="adds ave" value="0">全部</li>
					<foreach name="cateList" item="vo">
						<li class="adds blo" value="{$vo.id}">{$vo.name}</li>
					</foreach>
				</ul>
			</div>
			<form id="form" action="{:url('Home/Cardwallet/index')}" method="post">
				<input type="hidden" name="v_type" value="0">
				<input type="hidden" name="v_source" value="0">
			</form>
			<div class="do">确定</div>
		</div>
		<div class="cover"></div>
		<div class="model"></div>
		<script type="text/javascript" src="__HOME_JS__/jquery-1.8.3.min.js"></script>
		<script type="text/javascript" src="__HOME_JS__/jquery.charfirst.pinyin.js"></script>
		<script type="text/javascript" src="__HOME_JS__/sort.js"></script>

		<script>
			var isPageHide = false;
			window.addEventListener('pageshow', function() {
				if(isPageHide) {
					window.location.reload();
				}
			});
			window.addEventListener('pagehide', function() {
				isPageHide = true;
			});
		</script>
		<script>
			$(document).ready(function() {
				var txt = $(".ipt");
				$(this).keyup(function(e) {
					if(e.keyCode == 13)
						txt.focus();
				});
				txt.keyup(function(e) {
					if(e.keyCode == 13)
						$('#search_form').submit();
					// console.log($(".ipt").val());
				});
			});
			$(".adds").on('click', function() {
				$("input[name=v_type]").val($(this).val());
				$(this).addClass('ave').siblings().removeClass('ave');
			})
			$(".tabs>ul>li").on('touchstart', function() {
				$(this).addClass('active').siblings().removeClass('active');
				$("input[name=v_source]").val($(this).val());
			})
			$(".tab-a").on('touchstart', function() {
				var index = $(this).index();
			})
			$(".sel").on('click', function() {
				$(".cover").show();
				$(".screen").css({
					"transform": 'translateX(-20rem)',
					"transition": 'transform 1s'
				})
			})
			$(".cover").on('click', function() {
				$(".cover").hide();
				$(".screen").css({
					"transform": 'translateX(0rem)',
					"transition": 'transform 1s'
				})
			})
			$(".screen").on('click', function() {
				event.stopPropagation();
			})
			$(".manage").on('click', function() {
				$(".che").show();
				$(".del").show();
				$(".cancel").show();
				$(".manage").hide();
			})
			$(".cancel").on('click', function() {
				$(".che").hide();
				$(".del").hide();
				$(".cancel").hide();
				$(".manage").show();

			})
			$(".del").on('click', function() {
				$(".big").show();
				$(".tan").show();
				$(".del").hide();
			})
			$(".move").on('click', function() {
				$(".big").hide();
				$(".tan").hide();
				window.location.reload();
			})
			$(".affirm").on('click', function() {
				var postUrl = "{:url('Home/Cardwallet/delCard')}";
				var _cards = new Array();
				$("input[name='cardS[]']:checked").each(function() {
					_cards.push($(this).val());
				});
				// console.log(_cards);return;
				if(_cards) {
					$.post(postUrl, {
						'cards': _cards
					}, function(res) {
						if(res.status == 1) {
							//							$('.allcity-mask').show();
							$(".model").show();
							$(".model").html(res.msg);
							setTimeout(function() {
								$('.model').hide();
							}, 1000);
							setTimeout(function() {
								top.location.href = "{:url('Home/Cardwallet/index')}";
							}, 1200);
							$(".big").hide();
							$(".tan").hide();
						} else {
							$(".model").show();
							$(".model").html(res.msg);
							setTimeout(function() {
								$('.model').hide();
							}, 1000);
						}
					});
				}
			})
			$(".do").on('click', function() {
				$('#form').submit();
			})
			window.onload = function() {

				var Modernizr = window.Modernizr;

				if(Modernizr.csstransforms3d) {

					var head = document.querySelector('head');

					head.innerHTML = head.innerHTML + '<link rel="stylesheet" href="__HOME_CSS__/inserthtml.com.radios.min.css" />';

				} else {

					document.querySelector('.container').innerHTML = '<h1>Hey! Your browser doesn\'t support many of these custom checkboxes.</h1>' +

						'<p>So here is a type your browser does support:</p>' +

						'<div class="holder">' +

						'<div class="center" style="width: 186px;">' +
						'<input type="checkbox" id="checkbox-1-2" checked /><label for="checkbox-1-2"></label>' +
						'</div>' +

						'</div>';
				}
			}
			$('.num').each(function(i, k) {
				if($(this).html() == "") {
					$(this).html("暂无号码")
				}
			});
			//未读消息显示

			var unionid = "{$unionid}";
			var uphone = "{$phone}";
			$.ajax({
				type: 'post',
				url: '/index.php?s=/Api/Yun163/offlineMsg',
				dataType: 'json',
				data: {
					unionid: unionid,
					uname: uphone
				},
				success: function(res) {
					console.log(res)
					if(res.ResultType == 0) {
						
						$.each(res.AppendData,function(k,v){
							var id = '#'+v.phone;
							$(id).text(v.num);
							$(id).show();
							console.log(v.phone);
						})
						
							
					}
				},
				error: function() {
					console.log("错误")
				}
			});
		</script>
		<script src="https://res.wx.qq.com/open/js/jweixin-1.0.0.js" type="text/javascript"></script>
		<script type="text/javascript">
			document.addEventListener('WeixinJSBridgeReady', function onBridgeReady() {
				// 通过下面这个API隐藏右上角按钮hideOptionMenu
				WeixinJSBridge.call('hideOptionMenu');
			});
		</script>
	</body>

</html>