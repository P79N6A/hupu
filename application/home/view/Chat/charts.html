<extend name="./base" />

<block name="css_extend">
	<link rel="stylesheet" href="__HOME_CSS__/dist/css/swiper.min.css">
	<script src="__HOME_JS__/rem.js"></script>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<style>
		body {
			position: relative;
			background: url(__HOME_IMAGES__/bgc.png) no-repeat;
			background-size: 100% 100%;
		}

		.max {
			width: 90%;
			margin: 0 auto;
			/*height: 27rem;*/
			border-radius: 20px;
			background-color: #fff;
			margin-top: 27.5px;
			/* overflow: hidden; */
		}

		.tbody {
			overflow: hidden;
		}

		.top {
			width: 90%;
			margin: 0 auto;
			height: 50px;
			font-size: 1rem;
			border-radius: 5px;
			text-align: center;
			overflow: hidden;
		}

		.sel {
			display: inline-block;
			width: 68%;
			position: relative;
		}

		.opt {
			display: inline-block;
			height: 1.2rem;
			line-height: 1.2rem;
			text-align: center;
			color: #000;
			/*font-size: 36px;*/
		}

		.nav {
			font-size: 1.5rem;
			line-height: 60px;
		}

		.active {
			color: #2FB3D3;
		}

		.grade {
			color: #FEFEFE;
			font-size: 17px;
			width: 30%;
			display: inline-block;
		}

		table {
			width: 100%;
			background-color: #fff;
		}

		td {
			width: 20%;
			height: 60px;
			color: #333;
			text-align: center;
		}

		.ranking {
			font-size: 20px;
			color: #2FB3D3;
			font-weight: 700;
			text-align: center;
		}

		.head {
			background-color: #F7F7FF;
			color: #666666;
		}

		.img {
			text-align: center;
		}

		.img>img {
			width: 18px;
			height: 20px;
		}

		.clearfix::after {
			content: ".";
			clear: both;
			display: block;
			overflow: hidden;
			font-size: 0;
			height: 0;
			color:pink;
			/* background:pink; */
		}

		.fl {
			float: left;
		}

		.fr {
			float: right;
		}


		.name {
			padding-left: 20px;
			text-align: left;
			overflow: hidden;
			text-overflow: ellipsis;
			display: -webkit-box;
			-webkit-line-clamp: 2;
			-webkit-box-orient: vertical;
			width: 100%;
			padding: 18px 0;
		}
		.name a{
			color:#333;
			
		}
		
		a:link{text-decoration:none !important; }  

		a:visited{text-decoration:none !important; }

		a:hover{text-decoration:none !important;}

		a:active{text-decoration:none !important;}


		.line {
			width: 20px;
			height: 2px;
			background-color: #2FB3D3;
			margin: -15px auto;
		}

		p {
			margin-bottom: 0;
		}

		.ok {
			display: none;
		}

		.swiper-container {
			width: 100%;
    		height: 62%;
    		margin-top: -6%;
		}

		.swiper-slide {
			font-size: 18px;
			height: auto;
			-webkit-box-sizing: border-box;
			box-sizing: border-box;
		}

		.p {
			width: 19px;
			height: 19px;
			margin: 0 auto;
			border-radius: 2px;
			color: #fff;
		}

		.one {
			background-color: #ED4752;
		}

		.two {
			background-color: #F8C747;
		}

		.three {
			background-color: #CFD07B;
		}

		.four {
			background-color: #A0DDE1;
		}

		.five {
			background-color: #BBD4E5;
		}

		.num {
			text-align: center;
		}

		.rjl_djs {
			width:100%;
			height: 2rem;
			color: #2FB3D3;
			font-size: 1rem;
			line-height: 2rem;
			text-align: center;
			margin: 0 auto;
		}
		.countdown li{
			/* width:12%; */
		}

		.seperatorn{
			font-size: 16px;
			color: #DD4F43;
			/* width:43% !important; */
		} 

		span.rjl_djs {
			width: 1rem;
			height: 1rem;
			background: red;
		}

		/* 倒计时 */

		ul.countdown {
			list-style: none;
			margin: 0 auto;
			padding: 0;
			display: block;
			text-align: center;
			/* background: #CFD07B; */
		}

		ul.countdown li {
			display: inline-block;
		}

		ul.countdown li span {
			font-size: 0.8rem;
			font-weight: 300;
		}

		ul.countdown li.seperator {
			font-size: 1rem;
			color: #DD4F43;
		}

		.seperator {
			font-size: 1rem;
			color: #DD4F43;
		}

		ul.countdown li p {
			color: #a7abb1;
			font-size: 1rem;
		}

		a {
			color: #76949F;
			text-decoration: none;
		}

		a:hover {
			text-decoration: underline;
		}

		span.days {
			width: 1rem;
			height: 1rem;
			color: #fff;
			background: #279FBD;
		}

		span.hours {
			width: 1rem;
			height: 1rem;
			color: #fff;
			background: #279FBD;
		}

		span.minutes {
			width: 1rem;
			height: 1rem;
			color: #fff;
			background: #279FBD;
		}

		span.seconds {
			width: 1rem;
			height: 1rem;
			color: #fff;
			background: #279FBD;
		}

		#tabnav {
			width: 100%;
    		height: 50px;
			line-height: 50px;
			color: #666666;
			font-size: 18px;
			background-color: #F7F7FF;
		}

		ul{
			list-style: none;
		}

		/* 倒计时 结束 */
	</style>
</block>
<block name="body">

	<body>
		<div class="max">
			<div class="top">
				<span class="opt active" data-id="1">
					<div class="nav">本月龙虎榜</div>
					<!-- <p class="line" id="one1"></p> -->
				</span>
				<!-- <span class="opt" data-id="2">
					<div class="nav">月排行</div>
					<p class="line" id="one2" style="display: none;"></p>
				</span> -->
			</div>
			<div class="rjl_djs">
				<ul class="countdown">
					<li class="seperatorn">距开奖倒计时:</li>
					<li class="rjl">
						<span class="days">00</span>
						<span class="seperator">天</span>
					</li>
					<li>
						<span class="hours">00</span>
						<span class="seperator">时</span>
					</li>


					<li>
						<span class="minutes">00</span>
						<span class="seperator">分</span>
					</li>

					<li>
						<span class="seconds">00</span>
						<span class="seperator">秒</span>
					</li>

				</ul>
			</div>
			<div class="swiper-container" style="display: block;">
				<div class="swiper-wrapper">
					<div class="swiper-slide test" id="inset">

					</div>
				</div>
				<!-- Add Scroll Bar -->
			</div>
		</div>
		<script src="__HOME_CSS__/dist/js/swiper.min.js"></script>
		<!-- 倒计时 -->
		<script type="text/javascript" src="__HOME_JS__/rjljs/jquery.min.js"></script>
		<script type="text/javascript" src="__HOME_JS__/rjljs/jquery.downCount.js"></script>

		<!-- 倒计时结束 -->
		<script>
			setTimeout(function () {
				$('body')[0].style.height = window.innerHeight + 'px';
				$(".max").css('height', $(document).height() * 0.85);
			}, 20);

			var tab_bars = '';
			tab_bars +=
				'<ul id="tabnav" class="clearfix"><li class="fl" style="width:25%;text-align:center;margin-left:-15%;">排名</li><li class="fl" style="width:40%;text-align:center;margin-left:10%;">昵称</li><li class="fl" style="width:25%;text-align:center;margin-left:15%;">粉丝</li></ul>';
			$(".rjl_djs").after(tab_bars);
		</script>

		<script>
			$(function () {
				var id = '{$id}';
				$.ajax({
					//几个参数需要注意一下
					type: "POST", //方法类型
					dataType: "json", //预期服务器返回的数据类型
					url: "index.php?s=/Api/IndexApi/hot_user_lists", //url
					data: {
						"id": id,
						'vip_id': 0
					},
					success: function (result) {
						$('.countdown').downCount({
							date: result.endtime, //格式  '月/日/年 时:分:秒'
							offset: +8
						}, function () {
							mui.alert('榜单已揭晓,等待颁奖!');
						});
						setTimeout(function () {
							var days = $(".countdown .days").text();
							if (days === '00') {
								$(".rjl").hide();
							}
						}, 1000);
						if (result.ResultType == 0) {

							$('table').remove();
							var append_str =
								'<table>';
							// <td style="text-align: center;">佣金</td>
							$.each(result.AppendData, function (i, enty) {
								i++;

								if (i < 6) {
									append_str += '<tr>';
									if (i == 1) {
										append_str += '<td class="ranking"><p class="p one">' + i + '</p></td>';
									} else if (i == 2) {
										append_str += '<td class="ranking"><p class="p two">' + i + '</p></td>';
									} else if (i == 3) {
										append_str += '<td class="ranking"><p class="p three">' + i + '</p></td>';
									} else if (i == 4) {
										append_str += '<td class="ranking"><p class="p four">' + i + '</p></td>';
									} else {
										append_str += '<td class="ranking"><p class="p five">' + i + '</p></td>';
									}
									// append_str += '<td class="name">' + enty.nick_name + '</td>';
									append_str += '<td class="name"><a href="/index.php?s=/Home/Nologin/card_jump/unionid/' + enty.unionid +
										'">' + enty.nick_name + '</a></td>';
									append_str += '<td>' + enty.fans_num + '</td>';
									// append_str += '<td class="img"><img src="__HOME_IMAGES__/hot.png" alt=""/></td>';
									// append_str += '</tr>';
								} else {
									append_str += '<tr>';
									append_str += '<td class="num">' + i + '</td>';
									// append_str += '<td class="name">' + enty.nick_name + '</td>';
									append_str += '<td class="name"><a href="/index.php?s=/Home/Nologin/card_jump/unionid/' + enty.unionid +
										'">' + enty.nick_name + '</a></td>';
									append_str += '<td>' + enty.fans_num + '</td>';
									// append_str += '<td class="num">' + enty.total + '</td>';
									// append_str += '</tr>';
								}

							});
							append_str += '</table>';
							$('.test').append(append_str);
						}
						var swiper = new Swiper('.swiper-container', {
							scrollbar: {
								el: '.swiper-scrollbar'
							}
						});
					},
					error: function () {
						alert("暂无数据！");
					}
				});
			});
			//<span class="opt active" data-id="1">
			//					<div class="nav">周排行</div>
			//				     <p class="line" id="one1"></p>
			//				</span>
			//				<span class="opt" data-id="2">
			//					<div class="nav">月排行</div>
			//					<p class="line" id="one2" style="display: none;"></p>
			//				</span>
			var id = '{$id}';
			var isfalg = true;
			var dataid = 1;
			$('.opt').click(function () {

				//				var index = $(this).index();
				//				$(this).addClass('active').siblings().removeClass('active');
				//				$('.swiper-container').eq(index).show().siblings().hide();
				//				$("p").remove();
				//				$(this).append("<p class='line'></p>");
				var t = $(this);
				if ($(this).attr("data-id") == dataid) return;

				if (isfalg) {
					$("span.opt.active").removeClass("active");
					$("#one1").css("display", "none");
					t.addClass("active");
					$("#one2").css("display", "block");
					dataid = 2;
					isfalg = false;
					//点击月

				} else {
					$("span.opt.active").removeClass("active");
					$("#one2").css("display", "none");
					t.addClass("active");
					$("#one1").css("display", "block");
					dataid = 1;
					isfalg = true;
					//点击周
				}

				$.ajax({
					//几个参数需要注意一下
					type: "POST", //方法类型
					dataType: "json", //预期服务器返回的数据类型
					url: "index.php?s=/Api/IndexApi/hot_user_list", //url
					data: {
						"id": id,
						'vip_id': dataid - 1
					},
					success: function (result) {
						$('table').remove();
						if (result.ResultType == 0) {

							var append_str =
								'<table><tr class="head"><td style="text-align: center;width:25%;">排名</td><td style="width:50%;">昵称</td><td style="width:25%;">粉丝</td></tr>';
							// <td style="text-align: center;">佣金</td>
							$.each(result.AppendData, function (i, enty) {
								i++;

								if (i < 6) {
									append_str += '<tr>';
									if (i == 1) {
										append_str += '<td class="ranking"><p class="p one">' + i + '</p></td>';
									} else if (i == 2) {
										append_str += '<td class="ranking"><p class="p two">' + i + '</p></td>';
									} else if (i == 3) {
										append_str += '<td class="ranking"><p class="p three">' + i + '</p></td>';
									} else if (i == 4) {
										append_str += '<td class="ranking"><p class="p four">' + i + '</p></td>';
									} else {
										append_str += '<td class="ranking"><p class="p five">' + i + '</p></td>';
									}
									// append_str += '<td class="name">' + enty.nick_name + '</td>';
									append_str += '<td class="name"><a href="/index.php?s=/Home/Nologin/card_jump/unionid/' + enty.unionid +
										'">' + enty.nick_name + '</a></td>';
									append_str += '<td>' + enty.fans_num + '</td>';
									// append_str += '<td class="img"><img src="__HOME_IMAGES__/hot.png" alt=""/></td>';
									// append_str += '</tr>';
								} else {
									append_str += '<tr>';
									append_str += '<td class="num">' + i + '</td>';
									// append_str += '<td class="name">' + enty.nick_name + '</td>';
									append_str += '<td class="name"><a href="/index.php?s=/Home/Nologin/card_jump/unionid/' + enty.unionid +
										'">' + enty.nick_name + '</a></td>';
									append_str += '<td>' + enty.fans_num + '</td>';
									// append_str += '<td class="num">' + enty.total + '</td>';
									// append_str += '</tr>';
								}

							});
							append_str += '</table>';
							$('.test').append(append_str);
						}
						var swiper = new Swiper('.swiper-container', {
							scrollbar: {
								el: '.swiper-scrollbar'
							}
						});
					},
					error: function () {
						alert("暂无数据！");
					}
				});

			});
			//	
			var swiper = new Swiper('.swiper-container', {
				direction: 'vertical',
				slidesPerView: 'auto',
				freeMode: true,
				observer: true, //修改swiper自己或子元素时，自动初始化swiper
				observeParents: true, //修改swiper的父元素时，自动初始化swiper
				scrollbar: {
					el: '.swiper-scrollbar',
				},
				mousewheel: true,
			});
		</script>
		<script src="https://res.wx.qq.com/open/js/jweixin-1.0.0.js" type="text/javascript"></script>
		<script type="text/javascript">
			document.addEventListener('WeixinJSBridgeReady', function onBridgeReady() {
				// 通过下面这个API隐藏右上角按钮hideOptionMenu
				WeixinJSBridge.call('hideOptionMenu');
			});
		</script>
	</body>
</block>